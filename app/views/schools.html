<div class="root">

  <main-menu></main-menu>

<div class="main-container">

  <section-header ng-show="('schools' | routeSegmentEqualsTo)"
                  title="Schools"
                  icon="{{schools.icons.school}}"
                  show-search-input="true">
  </section-header>

  <section-header ng-show="('schools.new_school' | routeSegmentEqualsTo)"
                  title="Schools - New School"
                  icon="{{schools.icons.school}}"
                  show-search-input="true"
                  show-close="true"
                  close-function="schools.goToSchools()">
  </section-header>

  <section-header ng-show="('schools.edit_school.school_id' | routeSegmentEqualsTo)"
                  title="Schools - Edit School"
                  icon="{{schools.icons.school}}"
                  show-search-input="true"
                  show-close="true"
                  close-function="schools.goToSchools()">
  </section-header>

  <div class="main-container-inner" ng-class="{ 'main-container-inner-left' : ('schools.new_school' | routeSegmentEqualsTo) || ('schools.edit_school.school_id' | routeSegmentEqualsTo) }">

    <table class="tabla">
      <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Address</th>
        <th scope="col">Postal Code</th>
        <th scope="col">City</th>
        <th scope="col">Province</th>
        <th scope="col">Country</th>
        <th scope="col" class="option-header">Options</th>
      </tr>
      </thead>
      <tbody ng-repeat="school in schools.schools">

      <tr>
        <td class="bold">{{school.school_name}}</td>
        <td>{{school.school_address}}</td>
        <td>{{school.school_postal_code}}</td>
        <td>{{school.school_city}}</td>
        <td>{{school.school_province}}</td>
        <td>{{school.school_country}}</td>
        <td class="option">

          <div class="rombo-table small-square edit-bg" ng-show="userServiceData.loggedUser.rol ==='admin'" ng-click="schools.editSchool(school.school_id)">
            <i class="{{schools.icons.edit}} icon-size"></i>
          </div>

          <div class="rombo-table small-square delete-bg" ng-show="userServiceData.loggedUser.rol ==='admin'" ng-click="showDeletePopup[$index] = !showDeletePopup[$index]">
            <i class="{{schools.icons.deleteDocument}} icon-size"></i>
          </div>

          <!-- TODO Hacer Directiva -->

          <div class="bg-popup" ng-show="showDeletePopup[$index]">

            <div class="popup-container">
              <span>are you sure you want to delete this school?</span>
              <h5 class="bold">{{school.school_name}}</h5>
              <div class="popup-buttons-container">
                <button class="delete-button" ng-click="schools.deleteSchool(school.school_id); showDeletePopup[$index] = false">Delete</button>
                <button class="cancel-button"  ng-click="showDeletePopup[$index] = false">Cancel</button>
              </div>
            </div>

          </div>

          <!-- -->

        </td>

      </tr>

      </tbody>
    </table>

  </div>

  <div app-view-segment="1" ng-show="('schools.new_school' | routeSegmentEqualsTo)"></div>

  <div app-view-segment="2" ng-show="('schools.edit_school.school_id' | routeSegmentEqualsTo)"></div>

  <!--Código del botón New School -->
  <div ng-show="userServiceData.loggedUser.rol ==='admin'">
    <new-button icon="{{schools.icons.add}}"
              title="New School"
              button-function="schools.goToNewSchool()"
              ng-hide="('schools.new_school' | routeSegmentEqualsTo)">
    </new-button>
  </div>

  </div>

</div>
