<notification text="Route Created!"
              show-condition="newRoute.newRouteUpdated">
</notification>

<div class="main-container-inner">

  <div class="map-container">

    <subsection-header title="Route Map"
                       icon="{{newRoute.icons.routes}}"
                       map-buttons="true"
                       hide-button-condition="false"
                       icon-route="{{newRoute.icons.routes}}"
                       click-route="newRoute.changeMapMode('route')"
                       route-status="newRoute.selectedMode === 'route'"
                       icon-challenge="{{newRoute.icons.challenges}}"
                       click-challenge="newRoute.changeMapMode('challenge')"
                       challenge-status="newRoute.selectedMode === 'challenge'">
    </subsection-header>

    <div class="new-route-map" id="routeMap">

    </div>
  </div>

  <div class="new-route-form" ng-show="('routes.new_route' | routeSegmentEqualsTo)">

    <form-section-header title="New Route"
                         icon="{{newRoute.icons.add}}"
                         close-icon="{{newRoute.icons.close}}"
                         close-function="newRoute.goToRoutes()">
    </form-section-header>

    <form>

      <input type="text" placeholder="Name"
             class="input-text"
             ng-model="newRoute.route.route_name"
             ng-show="('routes.new_route' | routeSegmentEqualsTo)"
             required>

      <input type="text"
             placeholder="City"
             class="input-text"
             ng-model="newRoute.route.route_city"
             ng-show="('routes.new_route' | routeSegmentEqualsTo)"
             required>

      <input type="text"
             placeholder="Province"
             class="input-text"
             ng-model="newRoute.route.route_province"
             ng-show="('routes.new_route' | routeSegmentEqualsTo)"
             required>

      <select class="width-100"
              ng-model="newRoute.route.route_country"
              ng-options="country.code as country.name for country in newRoute.countries" required>
        <option value="">Country</option>
      </select>

      <hr class="space-new-route">

      <form-section-header title="Selected Challenges"
                           icon="{{newRoute.icons.challenges}}"
                           hide-close-button="true"
                           ng-show="newRoute.challengesFormArray.length > 0">
      </form-section-header>

      <select class="width-100"
              ng-model="newRoute.challengesFormArray[$index].challenge_id"
              ng-repeat="challenge in newRoute.challengesFormArray"
              placeholder="Select Challenge"
              ng-show="('routes.new_route' | routeSegmentEqualsTo)"
              ng-options="challenge.challenge_id as challenge.title for challenge in newRoute.challenges"
              ng-change="newRoute.updateChallengeForm($index, newRoute.challengesFormArray[$index].challenge_id)"
              required>
        <option value="">Select Challenge {{$index + 1}}</option>
      </select>

      <hr ng-show="newRoute.challengesFormArray.length > 0" class="space-new-route">

      <button-form show-button="('routes.new_route' | routeSegmentEqualsTo)"
                   click-button="newRoute.save()"
                   text-button="Add Route">
      </button-form>

    </form>

  </div>

</div>
