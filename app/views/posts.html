<div class="root">

  <main-menu></main-menu>

  <div class="main-container">

    <section-header ng-show="('posts' | routeSegmentEqualsTo)"
                    title="Posts"
                    icon="{{posts.icons.posts}}"
                    show-search-input="true">
    </section-header>

    <section-header ng-show="('posts.new_post' | routeSegmentEqualsTo)"
                    title="Posts - New Post"
                    icon="{{posts.icons.posts}}"
                    show-search-input="true"
                    show-close="true"
                    close-function="posts.goToPosts()">
    </section-header>

    <section-header ng-show="('posts.edit_post.post_id' | routeSegmentEqualsTo)"
                    title="Posts - Edit Post"
                    icon="{{posts.icons.posts}}"
                    show-search-input="true"
                    show-close="true"
                    close-function="posts.goToPosts()">
    </section-header>

    <div class="main-container-inner" ng-class="{ 'main-container-inner-left' : ('posts.new_post' | routeSegmentEqualsTo) || ('posts.edit_post.post_id' | routeSegmentEqualsTo) }">

      <table class="tabla">
        <thead>

        <tr>
          <th scope="col">Date</th>
          <th scope="col">Title</th>
          <th scope="col">Image</th>
          <th scope="col">Post Published (Countries)</th>
          <th scope="col" class="option-header">Options</th>
        </tr>
        </thead>

        <tbody ng-repeat="post in posts.posts">
        <tr>

          <td>{{post.date | date : 'dd/MM/yyyy'}}</td>
          <td class="bold">{{post.title}}</td>
          <td>{{post.image}}</td>
          <td class="text-capitalize">{{post.country}}</td>
          <td class="option">


            <div class="rombo-table small-square edit-bg" ng-click="posts.editPost(post.id)">
              <i class="{{posts.icons.edit}} icon-size"></i>
            </div>

            <div class="rombo-table small-square delete-bg" ng-click="showDeletePopup[$index] = !showDeletePopup[$index]">
              <i class="{{posts.icons.deleteDocument}} icon-size"></i>
            </div>

            <div class="bg-popup" ng-show="showDeletePopup[$index]">

              <div class="popup-container">
                <span>are you sure you want to delete this post?</span>
                <h5 class="bold">{{post.title}}</h5>
                <div class="popup-buttons-container">
                  <button class="delete-button" ng-click="posts.deletePost(post.id); showDeletePopup[$index] = false">Delete</button>
                  <button class="cancel-button"  ng-click="showDeletePopup[$index] = false">Cancel</button>
                </div>
              </div>

            </div>


        </tr>

        </tbody>
      </table>

    </div>

    <div app-view-segment="1" ng-show="('posts.new_post' | routeSegmentEqualsTo)"></div>

    <div app-view-segment="2" ng-show="('posts.edit_post.post_id' | routeSegmentEqualsTo)"></div>

    <new-button icon="{{posts.icons.add}}"
                title="New Post"
                button-function="posts.goToNewPost()"
                ng-hide="('posts.new_post' | routeSegmentEqualsTo)">
    </new-button>

  </div>

</div>

